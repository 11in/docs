---
title: Cloudinary
permalink: /docs/cloudinary/
eleventyNavigation:
    key: Cloudinary
    parent: Documentation
    order: 10
---
This provides some shortcodes and filters for generating Cloudinary
URLs.

[[toc]]

## Usage

Since the shortcodes this plugin provides are pretty generically named,
it’s recommended that you namespace them:

```js
conf.namespace('cl_', () => {
    conf.addPlugin(cloudinary)
})
```

## Configuration

The plugin accepts several configuration options.

-   `name` - This is the cloud name for your Cloudinary account. 
    You must either pass a value here, or set the [`CLOUDINARY_URL` environment variable](https://cloudinary.com/documentation/node_integration#configuration).

-   `transforms` - **optional** 
    This is a set of transforms that will be applied to *all* images generated by the plugin. 
    It assumes an array in the manner of the `transformation` argument on the [node SDK](https://cloudinary.com/documentation/node_integration).
    (The node SDK powers most of what this plugin does.)

-   `defaults` - **optional** 
    Adjust the defaults for various settings in the plugin.

    - `width` - **optional** The fallback width used for an image if the plugin isn’t given one.
        Defaults internally to `768` if no value is given.

## Shortcodes

Shortcodes are kind of like functions—they take in some arguments and return a string.

For these shortcodes, pass arguments as a JS object:

{% raw %}
```html
{% cl_image { path: 'folder/image.jpg', transforms: 'w_400' } %}
```
{% endraw %}

This allows us to allow for many arguments without requiring all of them to be specified.

:::tip
Set up commonly-used sets of arguments in your frontmatter or elsewhere so you can easily reuse them!
:::

### url

This will return a url, appropriately constructed.

**Arguments**

-   `path` - This is the path on cloudinary to the item you want, i.e. `folder/image.jpg`

-   `transforms` - Any transforms you’d like to apply to this item.

### image

This will return an entire image element.

**Arguments**

-   `path` - This is the path on cloudinary to the item you want, i.e. `folder/image.jpg`

-   `transforms` - Any transforms you’d like to apply to this item. These transforms will be applied to all urls in this image (the `src` and `srcset`).

-   `alt` - The alt tag on the image.
    While technically optional, you _should_ set one.

-   `title` - The title tag on the image.

-   `size` - The base size for this image.

-   `sizes` - A string describing the sizing.

-   `srcset` - Either a string (which will be reproduced as-is) or an array of integers, which will be used as widths.

-   `css` - This would normally be called `class` but JavaScript doesn’t like that. 
    A list of classes for this element.

-   `attrs` - Any other HTML attributes you want on this element, pass as an array of arrays. 
    For boolean attributes, just use an array with a single value.

## Filters

Filters take in a value, do something to it, and return it. 
They’re especially useful because they can be strung together to run several operations on a value in sequence.

:::important
This plugin is primarily intended for use with nunjucks (or `.njk`) templates.
The filters are defined as universal, and should work in Liquid and 11ty.js templates, but haven’t been tested.
:::

### url

The `url` filter behaves essentially the same as the shortcode, except
that it takes it’s parameters a bit differently:

{% raw %}
```html
{{ 'image.jpg' | img([{ width: 470 }]) }}
```
{% endraw %}

## Advanced Usage

If, for some reason, you want direct access to the methods these filters use, they’re available in the `src` directory, so you can get access to them like so:

```js
const url = require('@11in/cloudinary/src/url')({
    name: 'cloud-name',
})
```

:::important
You’ll need to pass an `options` object like the one used when instantiating the plugin to each of the imports to get them to work correctly.
:::
